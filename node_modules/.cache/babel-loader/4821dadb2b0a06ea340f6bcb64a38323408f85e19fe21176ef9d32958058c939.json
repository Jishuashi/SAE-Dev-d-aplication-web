{"ast":null,"code":"import _slicedToArray from\"/root/sae3-01-dev-d-apli/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'../styles/Login_signin.css';import human from'../assets/human.svg';import lock from'../assets/lock.svg';import{Link,useNavigate}from\"react-router-dom\";import $ from\"jquery\";import md5 from\"md5\";import{redirect}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var logged=_ref.logged,setLogged=_ref.setLogged,user=_ref.user,setUser=_ref.setUser,setRank=_ref.setRank,rank=_ref.rank,getLogCookies=_ref.getLogCookies;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),login=_useState2[0],setLogin=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),result=_useState6[0],setResult=_useState6[1];var updateLogged=function updateLogged(pValue){setLogged(pValue);};var handleSumbit=function handleSumbit(e){e.preventDefault();var form=$(e.target);$.ajax({type:\"POST\",url:form.attr(\"action\"),data:form.serialize(),success:function success(data){setResult(data);}});};var handleChangeLogin=function handleChangeLogin(e){setLogin(e.target.value);};var handleChangePass=function handleChangePass(e){setPassword(e.target.value);};var results=function results(){// eslint-disable-next-line\nvar navigate=useNavigate();var lStrRank=\"\";var lResult=0;for(var i=0;i<result.length;i++){if(result[i]==1){lResult=1;}else{lStrRank+=result[i];}}if(lResult==1){updateLogged(true);setUser(login);setRank(md5(lStrRank));navigate(\"/\");}else{return/*#__PURE__*/_jsx(\"p\",{className:'errorLogInSignIn',children:result});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"title\",children:\"S'identifier\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"https://192.168.1.161:443/php/login.php\",method:\"post\",onSubmit:function onSubmit(event){return handleSumbit(event);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"img\",{src:human,alt:\"human\",className:\"input-icon\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",id:\"login\",placeholder:\"Adresse mail\",className:\"input-field\",name:\"login\",type:\"text\",value:login,onInput:function onInput(event){return handleChangeLogin(event);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"img\",{src:lock,alt:\"lock\",className:\"input-icon\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",id:\"logpass\",placeholder:\"Mot de passe\",className:\"input-field\",name:\"password\",type:\"password\",value:password,onInput:function onInput(event){return handleChangePass(event);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"Se connecter\"}),/*#__PURE__*/_jsx(Link,{path:\"/inscription\",className:\"btn-link\",children:\"Mot de passe oubli\\xE9 ?\"})]}),results(),/*#__PURE__*/_jsx(Link,{className:\"btn-link\",to:\"/inscription\",children:\"Pas encore de compte ?\"})]});}export default Login;","map":{"version":3,"names":["React","useState","human","lock","Link","useNavigate","$","md5","redirect","Login","logged","setLogged","user","setUser","setRank","rank","getLogCookies","login","setLogin","password","setPassword","result","setResult","updateLogged","pValue","handleSumbit","e","preventDefault","form","target","ajax","type","url","attr","data","serialize","success","handleChangeLogin","value","handleChangePass","results","navigate","lStrRank","lResult","i","length","event"],"sources":["/root/sae3-01-dev-d-apli/src/pages/Login.js"],"sourcesContent":["import React, {useState} from 'react';\nimport '../styles/Login_signin.css';\nimport human from '../assets/human.svg';\nimport lock from '../assets/lock.svg';\nimport {Link, useNavigate} from \"react-router-dom\";\nimport $ from \"jquery\";\nimport md5 from \"md5\";\nimport {redirect} from \"react-router\";\n\nfunction Login({logged, setLogged, user, setUser, setRank, rank, getLogCookies}) {\n\n    const [login, setLogin] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [result , setResult] = useState(\"\");\n\n    const updateLogged = (pValue) => {\n        setLogged(pValue);\n    };\n\n    const handleSumbit = (e) => {\n        e.preventDefault();\n        const form = $(e.target);\n\n        $.ajax({\n            type: \"POST\",\n            url: form.attr(\"action\"),\n            data: form.serialize(),\n            success(data) {\n                setResult(data);\n            },\n        });\n    };\n\n    const handleChangeLogin = (e) => {\n        setLogin(e.target.value);\n    };\n\n    const handleChangePass = (e) => {\n        setPassword(e.target.value);\n    }\n\n    const results = () =>{\n        // eslint-disable-next-line\n        const navigate = useNavigate();\n        let lStrRank = \"\";\n        let lResult = 0;\n\n        for (let i = 0; i < result.length; i++) {\n            if (result[i] == 1){\n                lResult = 1;\n            }else{\n                lStrRank += result[i];\n            }\n        }\n\n        if(lResult == 1){\n            updateLogged(true);\n            setUser(login);\n            setRank(md5(lStrRank));\n\n            navigate(\"/\");\n        }\n        else {\n            return (<p className={'errorLogInSignIn'}>{result}</p>);\n        }\n    }\n\n    return (\n        <div className=\"card\">\n            <h4 className=\"title\">S'identifier</h4>\n            <form\n                action=\"https://192.168.1.161:443/php/login.php\"\n                method=\"post\"\n                onSubmit={(event) => handleSumbit(event)}\n            >\n                <div className=\"field\">\n                <img src={human} alt=\"human\" className=\"input-icon\"></img>\n                <input autoComplete=\"off\" id=\"login\" placeholder=\"Adresse mail\" className=\"input-field\" name=\"login\"\n                       type=\"text\"\n                       value={login}\n                       onInput={(event) => handleChangeLogin(event)}\n                />\n                </div>\n                <div className=\"field\">\n                    <img src={lock} alt=\"lock\" className=\"input-icon\"></img>\n                    <input autoComplete=\"off\" id=\"logpass\" placeholder=\"Mot de passe\" className=\"input-field\" name=\"password\"\n                           type=\"password\"\n                           value={password}\n                           onInput={(event) => handleChangePass(event)}\n                    />\n                </div>\n                <button className=\"btn\" type=\"submit\">Se connecter</button>\n                <Link path=\"/inscription\" className=\"btn-link\">Mot de passe oubli√© ?</Link>\n            </form>\n            {results()}\n            <Link className=\"btn-link\" to=\"/inscription\">Pas encore de compte ?</Link>\n        </div>\n    );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}