{"ast":null,"code":"import _slicedToArray from\"/root/sae3-01-dev-d-apli/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import'../../../styles/modules.css';import axios from\"axios\";import{useSearchParams,Link,useNavigate,createBrowserRouter}from\"react-router-dom\";import module from\"../../../assets/module.png\";import $ from\"jquery\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Modules(_ref){var logged=_ref.logged,user=_ref.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dataMod=_useState2[0],setDataMod=_useState2[1];var navigate=useNavigate();var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParms=_useSearchParams2[0];useEffect(function(){axios.get(\"https://192.168.1.161:3001/domains/modules\").then(function(response){setDataMod(response.data);}).catch(function(error){console.log(error);});},[]);if(logged){if(dataMod.modules!==undefined){var delayAndGo=function delayAndGo(e,path,name){e.preventDefault();$.ajax({url:\"https://192.168.1.161:443/php/logModule.php\",type:\"POST\",data:{user:user,module:name}});setTimeout(function(){return navigate(path);},20);};var domainType=searchParms.get(\"domain\");var domainList=[];for(var i=0;i<dataMod.modules.length;i++){if(!domainList.includes(dataMod.modules[i].domain_name)){domainList.push(dataMod.modules[i].domain_name);}}if(domainList.includes(domainType)){var divModule=[];var _loop=function _loop(i){if(dataMod.modules[i].domain_name===domainType){divModule.push(/*#__PURE__*/_jsx(Link,{to:'#',id:i,onClick:function onClick(e){return delayAndGo(e,\"/domains/modules/\".concat(dataMod.modules[i].module_name),dataMod.modules[i].name);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"module\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nameM\",style:{backgroundImage:\"url(\".concat(module,\")\")},children:/*#__PURE__*/_jsx(\"p\",{className:\"nameM\",children:dataMod.modules[i].name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"descriptionM\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"descriptionMP\",children:dataMod.modules[i].description}),/*#__PURE__*/_jsxs(\"p\",{className:\"credits\",children:[\"credits: \",dataMod.modules[i].credits]})]})]})},i));}};for(var _i=0;_i<dataMod.modules.length;_i++){_loop(_i);}return/*#__PURE__*/_jsxs(\"div\",{className:\"modulesDiv\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"ModuleText\",children:[\"Voici la liste des modules existants pour le domaine \",domainType,\":\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"modules\",id:\"divModules\",children:divModule})]});}else return/*#__PURE__*/_jsxs(\"p\",{className:\"loading\",children:[\"ID de domaine \\\"\",domainType,\"\\\" invalide, pour retourner en arri\\xE8re cliquez \",/*#__PURE__*/_jsx(Link,{to:\"/domains\",children:\"ici\"})]});}else return/*#__PURE__*/_jsx(\"p\",{className:\"loading\",children:\"Loading...\"});}else{navigate(\"/notAllowed\");}}export default Modules;","map":{"version":3,"names":["React","useState","useEffect","axios","useSearchParams","Link","useNavigate","createBrowserRouter","module","$","Modules","logged","user","dataMod","setDataMod","navigate","searchParms","get","then","response","data","catch","error","console","log","modules","undefined","delayAndGo","e","path","name","preventDefault","ajax","url","type","setTimeout","domainType","domainList","i","length","includes","domain_name","push","divModule","module_name","backgroundImage","description","credits"],"sources":["/root/sae3-01-dev-d-apli/src/pages/domains/modules/modules.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport '../../../styles/modules.css';\nimport axios from \"axios\";\nimport {useSearchParams, Link, useNavigate, createBrowserRouter} from \"react-router-dom\";\nimport module from \"../../../assets/module.png\";\nimport $ from \"jquery\";\n\n\nfunction Modules({logged, user}) {\n    const [dataMod, setDataMod] = useState([]);\n    const navigate = useNavigate();\n    const [searchParms] = useSearchParams();\n\n    useEffect(() => {\n        axios\n            .get(\"https://192.168.1.161:3001/domains/modules\")\n            .then(response => {\n                setDataMod(response.data);\n            })\n            .catch(error => {\n                console.log(error);\n            });\n    }, []);\n\n    if (logged) {\n        if (dataMod.modules !== undefined) {\n            const domainType = searchParms.get(\"domain\")\n\n            const domainList = []\n            function delayAndGo(e, path, name) {\n                e.preventDefault();\n\n                $.ajax({\n\t\t\turl: \"https://192.168.1.161:443/php/logModule.php\",\n                    type: \"POST\",\n                    data: {\n                        user: user,\n                        module: name,\n                    },\n                });\n\n                setTimeout(() => navigate(path), 20);\n            }\n\n\n\n            for (let i = 0; i < dataMod.modules.length; i++) {\n                if (!domainList.includes(dataMod.modules[i].domain_name)) {\n                    domainList.push(dataMod.modules[i].domain_name)\n                }\n            }\n\n            if (domainList.includes(domainType)) {\n                let divModule = [];\n\n                for (let i = 0; i < dataMod.modules.length; i++) {\n\n                    if (dataMod.modules[i].domain_name === domainType) {\n                        divModule.push(\n                            <Link to={'#'} key={i} id={i} onClick={(e) => delayAndGo(e, `/domains/modules/${dataMod.modules[i].module_name}`, dataMod.modules[i].name)}>\n                                <div className={\"module\"}>\n                                    <div className={\"nameM\"} style={{backgroundImage: `url(${module})`}}>\n                                        <p className={\"nameM\"}>{dataMod.modules[i].name}</p>\n                                    </div>\n                                    <div className={\"descriptionM\"}>\n                                        <p className={\"descriptionMP\"}>{dataMod.modules[i].description}</p>\n                                        <p className={\"credits\"}>credits: {dataMod.modules[i].credits}</p>\n                                    </div>\n                                </div>\n                            </Link>)\n                    }\n                }\n                return (\n                    <div className=\"modulesDiv\">\n                        <h1 className={\"ModuleText\"}>Voici la liste des modules existants pour le\n                            domaine {domainType}:</h1>\n                        <div className=\"modules\" id='divModules'>\n                            {divModule}\n                        </div>\n                    </div>\n                );\n            } else return <p className={\"loading\"}>ID de domaine \"{domainType}\" invalide, pour retourner en arri√®re\n                cliquez <Link to=\"/domains\">ici</Link></p>\n        } else return <p className={\"loading\"}>Loading...</p>\n    } else{\n        navigate(\"/notAllowed\");\n    }\n}\n\nexport default Modules;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}