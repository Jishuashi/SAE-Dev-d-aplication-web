{"ast":null,"code":"import _slicedToArray from\"/root/sae3-01-dev-d-apli/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import'../styles/Profile.css';import $ from\"jquery\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(_ref){var rank=_ref.rank,user=_ref.user,logged=_ref.logged;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),resultAdmin=_useState2[0],setResultAdmin=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),resultUser=_useState4[0],setResultUser=_useState4[1];var getProfile=function getProfile(){$.ajax({type:\"POST\",url:\"https://192.168.1.161:443/php/user.php\",data:{login:user},success:function success(data){setResultUser(data);}});var lArrayResult=resultUser.split(\";\");var lArrayFirtCol=['Nom :','Prénom :','Email :'];var lArrayProfil=[];var lRetrun=[];lArrayProfil=lArrayResult[0].split(\" \");var lCurrLine=[];for(var i=0;i<lArrayProfil.length;i++){lCurrLine.push(/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"UserTitle\",children:lArrayFirtCol[i]},i^2),/*#__PURE__*/_jsx(\"td\",{children:\"\\u200E \\u200E \\u200E\"},i^3),/*#__PURE__*/_jsx(\"td\",{children:lArrayProfil[i]},i^4)]},i));}return lCurrLine;};var getUsers=function getUsers(){$.ajax({type:\"POST\",url:\"https://192.168.1.161:443/php/admin.php\",success:function success(data){setResultAdmin(data);}});var lArrayResult=resultAdmin.split(\";;\");var lArrayUsers=[];var lRetrun=[];for(var i=0;i<lArrayResult.length;i++){lArrayUsers.push(lArrayResult[i].split(\";\"));}lArrayUsers.splice(-1,1);$('button').click(function(){var x=$(this).attr('id');var lArrayResult=resultAdmin.split(\";;\");var lArrayUsers=[];for(var _i=0;_i<lArrayResult.length;_i++){lArrayUsers.push(lArrayResult[_i].split(\";\"));}lArrayUsers.splice(-1,1);console.log(lArrayUsers[x][0]);$.ajax({type:\"POST\",url:\"https://192.168.1.161:443/php/delUser.php\",data:{login:lArrayUsers[x][0]},success:function success(data){console.log(data);}});$(this).parent().parent().remove();});for(var _i2=0;_i2<lArrayUsers.length;_i2++){var lCurrLine=[];if(lArrayUsers[_i2][0]!==\"gestion\"){for(var j=0;j<lArrayUsers[_i2].length;j++){if(j%4===3){lCurrLine.push(/*#__PURE__*/_jsx(\"td\",{id:\"col\",className:\"coll_\".concat(j),children:lArrayUsers[_i2][j]},j^2),/*#__PURE__*/_jsx(\"td\",{className:\"coll_\".concat(j+1),children:/*#__PURE__*/_jsx(\"button\",{id:_i2,children:\"supprimer\"})},j+_i2));}else{lCurrLine.push(/*#__PURE__*/_jsx(\"td\",{id:\"col\",className:\"coll_\".concat(j),children:lArrayUsers[_i2][j]},j^2));}}lRetrun.push(/*#__PURE__*/_jsx(\"tr\",{className:\"row_\".concat(_i2),children:lCurrLine},_i2^2));}}return lRetrun;};if(logged){if(rank==\"c69f204a43c20dae05b94f585b6a78cc\"){return/*#__PURE__*/_jsxs(\"div\",{className:\"userProfileNormal\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"titleProfile\",children:\"Profile\"}),/*#__PURE__*/_jsxs(\"table\",{children:[getProfile(),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"UserTitle\",children:\"Mot de passe :\"}),/*#__PURE__*/_jsx(\"td\",{children:\"\\u200E \\u200E \\u200E\"}),/*#__PURE__*/_jsx(\"td\",{className:\"UserPasswProfileName\",children:/*#__PURE__*/_jsx(Link,{to:\"/changePass\",children:\"Change Password\"})})]})]})]});}else if(rank==\"7a54f94c5e960104822fcbd38c95cd43\"){// Admin profile\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"userProfileAdmin\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"titleProfile\",children:\"Liste des utilisateurs :\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"coll_1\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"td\",{className:\"coll_2\",children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"td\",{className:\"coll_3\",children:\"Email\"}),/*#__PURE__*/_jsx(\"td\",{className:\"coll_4\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:getUsers()})]})]});}}else{navigate(\"/notAllowed\");}}export default Profile;","map":{"version":3,"names":["React","useState","Link","useNavigate","$","Profile","rank","user","logged","navigate","resultAdmin","setResultAdmin","resultUser","setResultUser","getProfile","ajax","type","url","data","login","success","lArrayResult","split","lArrayFirtCol","lArrayProfil","lRetrun","lCurrLine","i","length","push","getUsers","lArrayUsers","splice","click","x","attr","console","log","parent","remove","j"],"sources":["/root/sae3-01-dev-d-apli/src/pages/Profile.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport {Link, useNavigate} from \"react-router-dom\";\nimport '../styles/Profile.css';\nimport $ from \"jquery\";\n\n\nfunction Profile({rank, user, logged}) {\n    const navigate = useNavigate();\n    const [resultAdmin, setResultAdmin] = useState(\"\");\n    const [resultUser, setResultUser] = useState(\"\");\n\n    const getProfile = () => {\n        $.ajax({\n            type: \"POST\",\n            url: \"https://192.168.1.161:443/php/user.php\",\n            data: {login: user},\n            success(data) {\n                setResultUser(data);\n            },\n        });\n\n        const lArrayResult = resultUser.split(\";\");\n        const lArrayFirtCol = ['Nom :', 'Prénom :', 'Email :'];\n        let lArrayProfil = [];\n        let lRetrun = [];\n        lArrayProfil = lArrayResult[0].split(\" \");\n\n        let lCurrLine = [];\n        for (let i = 0; i < lArrayProfil.length; i++) {\n            lCurrLine.push(<tr key={i}>\n                <td key={i^2} className={\"UserTitle\"}>{lArrayFirtCol[i]}</td>\n                <td key={i^3}>‎ ‎ ‎</td>\n                <td key={i^4}>{lArrayProfil[i]}</td>\n            </tr>);\n        }\n\n        return lCurrLine;\n    }\n\n    const getUsers = () => {\n        $.ajax({\n            type: \"POST\",\n            url: \"https://192.168.1.161:443/php/admin.php\",\n            success(data) {\n                setResultAdmin(data);\n            },\n        });\n\n        const lArrayResult = resultAdmin.split(\";;\");\n        let lArrayUsers = [];\n        let lRetrun = [];\n\n\n        for (let i = 0; i < lArrayResult.length; i++) {\n            lArrayUsers.push(lArrayResult[i].split(\";\"));\n        }\n\n        lArrayUsers.splice(-1, 1);\n\n        $('button').click(function () {\n            var x = $(this).attr('id');\n            const lArrayResult = resultAdmin.split(\";;\");\n            let lArrayUsers = [];\n\n            for (let i = 0; i < lArrayResult.length; i++) {\n                lArrayUsers.push(lArrayResult[i].split(\";\"));\n            }\n\n            lArrayUsers.splice(-1, 1);\n            console.log(lArrayUsers[x][0]);\n            $.ajax({\n                type: \"POST\",\n                url: \"https://192.168.1.161:443/php/delUser.php\",\n                data: {login: lArrayUsers[x][0]},\n                success(data) {\n                    console.log(data);\n                }\n            });\n\n            $(this).parent().parent().remove();\n        });\n\n        for (let i = 0; i < lArrayUsers.length; i++) {\n            let lCurrLine = [];\n            if (lArrayUsers[i][0] !== \"gestion\") {\n                for (let j = 0; j < lArrayUsers[i].length; j++) {\n                    if (j % 4 === 3) {\n                        lCurrLine.push(<td id='col' className={`coll_${j}`} key={j^2}>{lArrayUsers[i][j]}</td>, <td\n                            className={`coll_${j + 1}`} key={(j+i)}>\n                            <button id={i}>supprimer</button>\n                        </td>);\n                    } else {\n                        lCurrLine.push(<td id='col' className={`coll_${j}`} key={j^2}>{lArrayUsers[i][j]}</td>);\n                    }\n                }\n                lRetrun.push(\n                    <tr key={i^2} className={`row_${i}`}>{lCurrLine}</tr>\n                );\n            }\n        }\n        return lRetrun;\n    };\n\n    if (logged) {\n        if (rank == \"c69f204a43c20dae05b94f585b6a78cc\") {\n            return (\n                <div className={\"userProfileNormal\"}>\n                    <h1 className={\"titleProfile\"}>Profile</h1>\n                    <table>\n                        {getProfile()}\n                        <tr>\n                            <td className={\"UserTitle\"}>Mot de passe :</td>\n                            <td>‎ ‎ ‎</td>\n                            <td className={\"UserPasswProfileName\"}><Link to={\"/changePass\"}>Change Password</Link>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            );\n        } else if (rank == \"7a54f94c5e960104822fcbd38c95cd43\") {\n            // Admin profile\n            return (<div className={\"userProfileAdmin\"}>\n                <h1 className={\"titleProfile\"}>Liste des utilisateurs :</h1>\n                <table>\n                    <thead>\n                    <tr>\n                        <td className={\"coll_1\"}>Nom</td>\n                        <td className={\"coll_2\"}>Prénom</td>\n                        <td className={\"coll_3\"}>Email</td>\n                        <td className={\"coll_4\"}>Action</td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                        {getUsers()}\n                    </tbody>\n                </table>\n            </div>);\n        }\n    } else {\n        navigate(\"/notAllowed\");\n    }\n}\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}